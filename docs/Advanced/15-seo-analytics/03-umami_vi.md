---
title: "15.3 Tri·ªÉn khai th·ªëng k√™ Umami"
description: "S·ª≠ d·ª•ng 1Panel ƒë·ªÉ tri·ªÉn khai h·ªá th·ªëng th·ªëng k√™ Umami"
chapter: "Ch∆∞∆°ng 15"
priority: "üü°"
---

# 15.3 Tri·ªÉn khai th·ªëng k√™ Umami üü°

> **ƒê·ªçc xong ph·∫ßn n√†y, b·∫°n s·∫Ω g·∫∑t h√°i ƒë∆∞·ª£c:**
>
> - Hi·ªÉu gi√° tr·ªã v√† t√°c d·ª•ng c·ªßa th·ªëng k√™ trang web
> - N·∫Øm v·ªØng ph∆∞∆°ng ph√°p tri·ªÉn khai Umami b·∫±ng 1Panel
> - H·ªçc c√°ch c·∫•u h√¨nh v√† s·ª≠ d·ª•ng Umami ƒë·ªÉ theo d√µi d·ªØ li·ªáu
> - Hi·ªÉu t·∫ßm quan tr·ªçng c·ªßa vi·ªác b·∫£o v·ªá quy·ªÅn ri√™ng t∆∞

> Online kh√¥ng ph·∫£i l√† k·∫øt th√∫c, m√† l√† s·ª± kh·ªüi ƒë·∫ßu c·ªßa s·ª± th·∫•u hi·ªÉu. Th·ªëng k√™ d·ªØ li·ªáu gi√∫p b·∫°n hi·ªÉu ng∆∞·ªùi d√πng: H·ªç t·ª´ ƒë√¢u ƒë·∫øn? D√πng thi·∫øt b·ªã g√¨? T√≠nh nƒÉng n√†o ƒë∆∞·ª£c ∆∞a chu·ªông?

---

## T·∫°i sao c·∫ßn th·ªëng k√™ trang web?

Th·ªëng k√™ trang web tr·∫£ l·ªùi c√°c c√¢u h·ªèi c·ªët l√µi c·ªßa v·∫≠n h√†nh s·∫£n ph·∫©m.

| C√¢u h·ªèi                      | D·ªØ li·ªáu th·ªëng k√™                         |
| ---------------------------- | ---------------------------------------- |
| C√≥ bao nhi√™u ng∆∞·ªùi truy c·∫≠p? | L∆∞·ª£t xem trang, Kh√°ch truy c·∫≠p duy nh·∫•t  |
| H·ªç t·ª´ ƒë√¢u ƒë·∫øn?               | Ngu·ªìn trang web, T·ª´ kh√≥a t√¨m ki·∫øm        |
| D√πng thi·∫øt b·ªã g√¨?            | Lo·∫°i thi·∫øt b·ªã, H·ªá ƒëi·ªÅu h√†nh, Tr√¨nh duy·ªát |
| Trang n√†o ƒë∆∞·ª£c ∆∞a chu·ªông?    | X·∫øp h·∫°ng xem trang                       |
| Ng∆∞·ªùi d√πng d·ª´ng l·∫°i bao l√¢u? | Th·ªùi l∆∞·ª£ng phi√™n, T·ª∑ l·ªá tho√°t            |

::: tip S·ª± k·∫øt h·ª£p gi·ªØa d·ªØ li·ªáu v√† ph·∫£n h·ªìi

D·ªØ li·ªáu cho b·∫°n bi·∫øt "chuy·ªán g√¨ ƒë√£ x·∫£y ra", ph·∫£n h·ªìi ng∆∞·ªùi d√πng cho b·∫°n bi·∫øt "t·∫°i sao n√≥ x·∫£y ra". K·∫øt h·ª£p c·∫£ hai m·ªõi ƒë∆∞a ra ƒë∆∞·ª£c quy·∫øt ƒë·ªãnh t·ªët h∆°n.

:::

---

## Gi·ªõi thi·ªáu Umami

**Umami** l√† c√¥ng c·ª• ph√¢n t√≠ch trang web m√£ ngu·ªìn m·ªü, ch√∫ tr·ªçng quy·ªÅn ri√™ng t∆∞.

| ƒê·∫∑c t√≠nh                | Gi·∫£i th√≠ch                           |
| ----------------------- | ------------------------------------ |
| **M√£ ngu·ªìn m·ªü**         | Code c√¥ng khai, c√≥ th·ªÉ t·ª± tri·ªÉn khai |
| **Th√¢n thi·ªán ri√™ng t∆∞** | Kh√¥ng d√πng Cookie, tu√¢n th·ªß GDPR     |
| **Nh·∫π**                 | Script nh·ªè h∆°n 1KB                   |
| **ƒê∆°n gi·∫£n**            | Giao di·ªán tinh g·ªçn, d·ªÖ s·ª≠ d·ª•ng       |
| **Mi·ªÖn ph√≠**            | T·ª± tri·ªÉn khai kh√¥ng t·ªën th√™m ph√≠     |

### Umami vs Google Analytics

| So s√°nh              | Umami                            | Google Analytics             |
| -------------------- | -------------------------------- | ---------------------------- |
| C√°ch tri·ªÉn khai      | T·ª± l∆∞u tr·ªØ (Self-host)           | D·ªãch v·ª• ƒë√°m m√¢y              |
| Quy·ªÅn ri√™ng t∆∞       | Kh√¥ng theo d√µi danh t√≠nh c√° nh√¢n | Theo d√µi ng∆∞·ªùi d√πng chi ti·∫øt |
| K√≠ch th∆∞·ªõc script    | < 1KB                            | ~45KB                        |
| Giao di·ªán            | ƒê∆°n gi·∫£n                         | Ch·ª©c nƒÉng ph·ª©c t·∫°p           |
| Quy·ªÅn s·ªü h·ªØu d·ªØ li·ªáu | Ki·ªÉm so√°t ho√†n to√†n              | Thu·ªôc v·ªÅ Google              |
| ƒê∆∞·ªùng cong h·ªçc t·∫≠p   | Th·∫•p                             | Cao                          |

---

## Tri·ªÉn khai Umami b·∫±ng 1Panel

N·∫øu ƒë√£ ho√†n th√†nh thi·∫øt l·∫≠p VPS v√† 1Panel ·ªü ch∆∞∆°ng 14, tri·ªÉn khai Umami ch·ªâ m·∫•t v√†i ph√∫t.

### C√°c b∆∞·ªõc tri·ªÉn khai

1. **ƒêƒÉng nh·∫≠p 1Panel**

   Truy c·∫≠p `https://ip-server-cua-ban:port`, ƒëƒÉng nh·∫≠p b·∫£ng qu·∫£n tr·ªã.

2. **V√†o C·ª≠a h√†ng ·ª©ng d·ª•ng**

   Ch·ªçn "App Store" ·ªü menu b√™n tr√°i, t√¨m ki·∫øm "Umami".

3. **C√†i ƒë·∫∑t Umami**

   B·∫•m c√†i ƒë·∫∑t, c·∫•u h√¨nh tham s·ªë c∆° b·∫£n:
   - T√™n ·ª©ng d·ª•ng: umami
   - T√™n container: umami
   - C·ªïng: 3001 (ho·∫∑c t√πy ch·ªânh)

4. **C·∫•u h√¨nh Database**

   Umami c·∫ßn database PostgreSQL:
   - C√≥ th·ªÉ d√πng d·ªãch v·ª• database c·ªßa 1Panel ƒë·ªÉ t·∫°o
   - Ho·∫∑c d√πng database b√™n ngo√†i

5. **Ho√†n t·∫•t c√†i ƒë·∫∑t**

   ƒê·ª£i container kh·ªüi ƒë·ªông, truy c·∫≠p `http://server-cua-ban:3001`.

### ƒêƒÉng nh·∫≠p l·∫ßn ƒë·∫ßu

Th√¥ng tin ƒëƒÉng nh·∫≠p m·∫∑c ƒë·ªãnh:

- T√™n ng∆∞·ªùi d√πng: admin
- M·∫≠t kh·∫©u: umami

**Quan tr·ªçng**: ƒêƒÉng nh·∫≠p xong ƒë·ªïi m·∫≠t kh·∫©u ngay!

---

## C·∫•u h√¨nh Umami

### T·∫°o trang web

Sau khi ƒëƒÉng nh·∫≠p, th√™m trang web ƒë·∫ßu ti√™n:

1. B·∫•m "Settings" ‚Üí "Websites"
2. B·∫•m "Add website"
3. ƒêi·ªÅn th√¥ng tin:
   - Name: T√™n trang web
   - Domain: T√™n mi·ªÅn (nh∆∞ `example.com`)
4. B·∫•m l∆∞u

### L·∫•y m√£ theo d√µi

Sau khi th√™m trang web s·∫Ω hi·ªán m√£ theo d√µi:

```html
<script
  defer
  src="https://url-umami-cua-ban/script.js"
  data-website-id="id-website-cua-ban"
></script>
```

### T√≠ch h·ª£p v√†o Next.js

T√≠ch h·ª£p m√£ theo d√µi v√†o d·ª± √°n Next.js:

```typescript
// app/layout.tsx
import Script from 'next/script';

export default function RootLayout({ children }: { children: React.ReactNode }) {
  return (
    <html lang="vi">
      <head>
        <Script
          defer
          src="https://url-umami-cua-ban/script.js"
          data-website-id="id-website-cua-ban"
        />
      </head>
      <body>{children}</body>
    </html>
  );
}
```

Ho·∫∑c s·ª≠ d·ª•ng bi·∫øn m√¥i tr∆∞·ªùng:

```typescript
<Script
  defer
  src={process.env.NEXT_PUBLIC_UMAMI_URL}
  data-website-id={process.env.NEXT_PUBLIC_UMAMI_ID}
/>
```

---

## Gi·∫£i m√£ c√°c ch·ªâ s·ªë c·ªët l√µi

B·∫£ng ƒëi·ªÅu khi·ªÉn Umami hi·ªÉn th·ªã c√°c ch·ªâ s·ªë c·ªët l√µi sau.

### Ch·ªâ s·ªë truy c·∫≠p

| Ch·ªâ s·ªë              | Gi·∫£i th√≠ch                             |
| ------------------- | -------------------------------------- |
| **Pageviews**       | T·ªïng l∆∞·ª£t xem trang                    |
| **Unique Visitors** | S·ªë kh√°ch truy c·∫≠p duy nh·∫•t             |
| **Visits**          | S·ªë l∆∞·ª£t truy c·∫≠p (phi√™n/session)       |
| **Bounce Rate**     | T·ª∑ l·ªá tho√°t (t·ª∑ l·ªá truy c·∫≠p trang ƒë∆°n) |

### Ngu·ªìn l∆∞u l∆∞·ª£ng

| Ngu·ªìn        | Gi·∫£i th√≠ch             |
| ------------ | ---------------------- |
| **Search**   | C√¥ng c·ª• t√¨m ki·∫øm       |
| **Social**   | M·∫°ng x√£ h·ªôi            |
| **Direct**   | Truy c·∫≠p tr·ª±c ti·∫øp     |
| **Referral** | Link t·ª´ trang web kh√°c |

### Th√¥ng tin thi·∫øt b·ªã

| Ch·ªâ s·ªë      | Gi·∫£i th√≠ch                     |
| ----------- | ------------------------------ |
| **Browser** | Lo·∫°i tr√¨nh duy·ªát               |
| **OS**      | H·ªá ƒëi·ªÅu h√†nh                   |
| **Device**  | Lo·∫°i thi·∫øt b·ªã (Desktop/Mobile) |
| **Screen**  | ƒê·ªô ph√¢n gi·∫£i m√†n h√¨nh          |

---

## Theo d√µi s·ª± ki·ªán (Event Tracking)

Ngo√†i xem trang, c√≤n c√≥ th·ªÉ theo d√µi s·ª± ki·ªán t√πy ch·ªânh.

### Theo d√µi click n√∫t

```typescript
// Theo d√µi click n√∫t chia s·∫ª
import { umami } from "@umami/node";

umami.track("share", {
  platform: "twitter",
  content: "article-slug",
});
```

Ho·∫∑c d√πng c√°ch nguy√™n b·∫£n:

```typescript
// Theo d√µi s·ª± ki·ªán chung
window.umami?.track("share", {
  platform: "twitter",
  content: "article-slug",
});
```

### C√°c lo·∫°i s·ª± ki·ªán th∆∞·ªùng g·∫∑p

| S·ª± ki·ªán     | Gi·∫£i th√≠ch                        |
| ----------- | --------------------------------- |
| `signup`    | ƒêƒÉng k√Ω ng∆∞·ªùi d√πng                |
| `login`     | ƒêƒÉng nh·∫≠p ng∆∞·ªùi d√πng              |
| `purchase`  | Ho√†n t·∫•t mua h√†ng                 |
| `download`  | T·∫£i xu·ªëng file                    |
| `share`     | Chia s·∫ª n·ªôi dung                  |
| `cta_click` | Click n√∫t k√™u g·ªçi h√†nh ƒë·ªông (CTA) |

---

## Ch·ªâ s·ªë ch√≠nh vs Ch·ªâ s·ªë h∆∞ danh (Vanity Metrics)

Ph√¢n bi·ªát ch·ªâ s·ªë c√≥ √Ω nghƒ©a v√† ch·ªâ s·ªë v√¥ nghƒ©a.

| Ch·ªâ s·ªë ch√≠nh                        | Ch·ªâ s·ªë h∆∞ danh        |
| ----------------------------------- | --------------------- |
| T·ª∑ l·ªá gi·ªØ ch√¢n                      | T·ªïng l∆∞·ª£t xem         |
| T·ª∑ l·ªá chuy·ªÉn ƒë·ªïi                    | T·ªïng s·ªë kh√°ch         |
| Ng∆∞·ªùi d√πng ho·∫°t ƒë·ªông (Active Users) | Th·ªùi gian ·ªü l·∫°i trang |
| Doanh thu                           | S·ªë fan m·∫°ng x√£ h·ªôi    |

::: tip T·∫≠p trung v√†o ch·ªâ s·ªë c√≥ gi√° tr·ªã h√†nh ƒë·ªông

Ch·ªçn ch·ªâ s·ªë c√≥ th·ªÉ ch·ªâ d·∫´n h√†nh ƒë·ªông. N·∫øu nh√¨n m·ªôt d·ªØ li·ªáu xong b·∫°n kh√¥ng bi·∫øt ph·∫£i l√†m g√¨, th√¨ ƒë√≥ c√≥ th·ªÉ l√† ch·ªâ s·ªë h∆∞ danh.

:::

---

## B·∫£o v·ªá quy·ªÅn ri√™ng t∆∞

Thi·∫øt k·∫ø c·ªßa Umami ch√∫ tr·ªçng b·∫£o v·ªá quy·ªÅn ri√™ng t∆∞.

### Tu√¢n th·ªß GDPR

Umami kh√¥ng l∆∞u tr·ªØ th√¥ng tin nh·∫≠n d·∫°ng c√° nh√¢n:

- Kh√¥ng d√πng Cookie
- Kh√¥ng theo d√µi ng∆∞·ªùi d√πng c√° nh√¢n
- Kh√¥ng thu th·∫≠p d·ªØ li·ªáu ƒë·ªãnh danh
- Ki·ªÉm so√°t d·ªØ li·ªáu ho√†n to√†n

### C√†i ƒë·∫∑t ri√™ng t∆∞

Trong c√†i ƒë·∫∑t Umami c√≥ th·ªÉ:

- B·∫≠t bƒÉm IP (·∫©n danh m·ªôt ph·∫ßn)
- Thi·∫øt l·∫≠p th·ªùi h·∫°n l∆∞u gi·ªØ d·ªØ li·ªáu
- V√¥ hi·ªáu h√≥a m·ªôt s·ªë t√≠nh nƒÉng theo d√µi

---

## C√¢u h·ªèi th∆∞·ªùng g·∫∑p

### Q1: D√πng ƒë·ªìng th·ªùi Umami v√† Google Analytics ƒë∆∞·ª£c kh√¥ng?

ƒê∆∞·ª£c, nh∆∞ng kh√¥ng c·∫ßn thi·∫øt. Ch·ªçn m·ªôt c√°i th√¥i, d√πng nhi·ªÅu c√°i s·∫Ω tƒÉng g√°nh n·∫∑ng t·∫£i trang.

### Q2: D·ªØ li·ªáu bao l√¢u c·∫≠p nh·∫≠t?

D·ªØ li·ªáu th·ªùi gian th·ª±c tr·ªÖ kho·∫£ng 1-2 ph√∫t. B·∫£ng ƒëi·ªÅu khi·ªÉn t·ª± ƒë·ªông l√†m m·ªõi.

### Q3: L√†m th·∫ø n√†o xu·∫•t d·ªØ li·ªáu?

Umami h·ªó tr·ª£ ch·ª©c nƒÉng xu·∫•t d·ªØ li·ªáu. Trong c√†i ƒë·∫∑t c√≥ th·ªÉ ch·ªçn ƒë·ªãnh d·∫°ng xu·∫•t v√† kho·∫£ng th·ªùi gian.

### Q4: Qu·∫£n l√Ω nhi·ªÅu website th·∫ø n√†o?

Th√™m nhi·ªÅu website trong Umami, m·ªói website c√≥ m√£ theo d√µi v√† ID ƒë·ªôc l·∫≠p.

---

## Tr·ªçng t√¢m ph·∫ßn n√†y

- ‚úÖ Th·ªëng k√™ trang web gi√∫p hi·ªÉu h√†nh vi ng∆∞·ªùi d√πng
- ‚úÖ Umami l√† c√¥ng c·ª• th·ªëng k√™ ngu·ªìn m·ªü, th√¢n thi·ªán ri√™ng t∆∞
- ‚úÖ 1Panel c√≥ th·ªÉ tri·ªÉn khai Umami b·∫±ng m·ªôt c√∫ nh·∫•p chu·ªôt
- ‚úÖ Ch·ªâ s·ªë c·ªët l√µi g·ªìm l∆∞·ª£ng truy c·∫≠p, ngu·ªìn, thi·∫øt b·ªã
- ‚úÖ Theo d√µi s·ª± ki·ªán gi√∫p gi√°m s√°t h√†nh vi ng∆∞·ªùi d√πng c·ª• th·ªÉ
- ‚úÖ T·∫≠p trung v√†o ch·ªâ s·ªë ch√≠nh thay v√¨ ch·ªâ s·ªë h∆∞ danh
- ‚úÖ B·∫£o v·ªá quy·ªÅn ri√™ng t∆∞ l√† y√™u c·∫ßu c∆° b·∫£n c·ªßa c√¥ng c·ª• th·ªëng k√™ hi·ªán ƒë·∫°i

Sau khi tri·ªÉn khai th·ªëng k√™, ti·∫øp theo h√£y t√¨m hi·ªÉu y√™u c·∫ßu tu√¢n th·ªß ph√°p l√Ω.

---

## N·ªôi dung li√™n quan

- Tr∆∞·ªõc ƒë√≥: [Ch∆∞∆°ng 14: V·∫≠n h√†nh VPS v√† Deploy](../14-vps-ops-deploy/index_vi.md)
- Tr∆∞·ªõc ƒë√≥: [15.1 Chia s·∫ª Open Graph](./01-opengraph-sharing_vi.md)
- Chi ti·∫øt: [15.4 Th·ª±c h√†nh tu√¢n th·ªß ph√°p l√Ω](./04-legal_vi.md)
