---
title: "3.6.2 Chẩn đoán vấn đề: AI sai ở đâu"
---


![03-technique_3.6-debugging-ai_3.6.2-diagnose-problems.png](../../../public/images/Basic/03-technique_3.6-debugging-ai_3.6.2-diagnose-problems.png)
# 3.6.2 Chẩn đoán vấn đề: AI sai ở đâu

## Qua phần học này, bạn sẽ nắm vững

- Sử dụng "Phương pháp chẩn đoán nhanh 3 phút" để định vị vấn đề
- Phân biệt "Tôi nói không rõ" và "Năng lực AI không đủ"
- Chọn chiến lược ứng phó đúng đắn dựa trên loại vấn đề
- Có được một cây quyết định chẩn đoán

## Vấn đề cốt lõi của chẩn đoán

Khi output của AI không đạt kỳ vọng, trước tiên bạn phải trả lời một câu hỏi:

> **Là tôi nói không rõ, hay là AI làm không đúng?**

Câu trả lời cho vấn đề này quyết định bạn nên làm gì tiếp theo:
- Nếu là bạn nói không rõ → Bổ sung ngữ cảnh, mô tả lại
- Nếu là AI làm không đúng → Đổi cách hỏi, hoặc đổi chiến lược

## Phương pháp chẩn đoán nhanh 3 phút

Trước khi phân tích sâu, dùng 3 bước này để rà soát nhanh, có thể bắt được khoảng 60% vấn đề thường gặp:

### Bước 1: Chạy kiểm tra code (30 giây)

```bash
# Nếu là dự án JavaScript/TypeScript
npx eslint <tên_file>   # Kiểm tra vấn đề cú pháp và định dạng
npx tsc --noEmit      # Kiểm tra lỗi kiểu (nếu dùng TypeScript)
```

**Các vấn đề có thể phát hiện**:
- Lỗi cú pháp (thiếu ngoặc, sai chính tả từ khóa)
- Kiểu không khớp
- Biến chưa định nghĩa

### Bước 2: Kiểm tra dependency và API (60 giây)

Đối chiếu câu lệnh import trong code, kiểm tra:

- [ ] Gói được import có tồn tại không? (Dùng phương pháp xác minh ở 3.6.1)
- [ ] Phương thức được gọi có thực sự tồn tại trong gói đó không?
- [ ] Phiên bản có khớp không?

**Các vấn đề có thể phát hiện**:
- Ảo giác gói
- Ảo giác API
- Vấn đề tương thích phiên bản

### Bước 3: Chạy test hiện có (90 giây)

Nếu dự án có các trường hợp test (test case):

```bash
npm test           # Hoặc lệnh test của dự án bạn
```

**Các vấn đề có thể phát hiện**:
- Thay đổi hành vi (chức năng cũ đang chạy tốt bị sửa hỏng)
- Lỗi logic
- Xử lý trường hợp biên không thỏa đáng

## Bốn góc phần tư phân tích nguyên nhân gốc rễ

Nếu chẩn đoán 3 phút không định vị được vấn đề, dùng biểu đồ bốn góc phần tư này để phân tích nguyên nhân gốc rễ:

```
                    Tôi nói rõ ràng
                        ↑
          ┌─────────────┼─────────────┐
          │             │             │
          │   AI sai    │ Bổ sung ngữ │
          │             │    cảnh     │
 Nhiệm vụ │ → Đổi cách  │ → Mô tả lại │  Nhiệm vụ
 đơn giản │    hỏi      │             │  phức tạp
          │             │             │
          ├─────────────┼─────────────┤
          │             │             │
          │  Tách nhỏ   │ Mô tả lại + │
          │  nhiệm vụ   │  Tách nhỏ   │
          │ → Làm từng  │ → Giảm độ   │
          │    bước     │   phức tạp  │
          │             │             │
          └─────────────┴─────────────┘
                        ↓
                    Tôi nói không rõ
```

### Góc phần tư 1: Nhiệm vụ đơn giản + Tôi nói rõ ràng → AI sai

**Đặc điểm**:
- Nhiệm vụ rất rõ ràng, không nên có sự mơ hồ
- Thông tin bạn đưa đủ hoàn chỉnh
- Nhưng output của AI rõ ràng là sai

**Chiến lược ứng phó**:
- Đổi một cách hỏi khác để mô tả lại
- Đưa ra ví dụ đúng để AI tham khảo
- Thử công cụ AI khác

**Ví dụ**:
```
Prompt gốc: Viết một hàm nhận biết năm nhuận

Vấn đề: Logic AI đưa không đúng

Đổi cách hỏi:
"Hãy viết một hàm JavaScript nhận biết năm nhuận.
Quy tắc năm nhuận:
1. Chia hết cho 4 nhưng không chia hết cho 100 là năm nhuận
2. Chia hết cho 400 cũng là năm nhuận
Hãy thực hiện nghiêm ngặt theo quy tắc này."
```

### Góc phần tư 2: Nhiệm vụ đơn giản + Tôi nói không rõ → Bổ sung ngữ cảnh

**Đặc điểm**:
- Bản thân nhiệm vụ không phức tạp
- Nhưng bạn giả định AI biết bối cảnh nào đó
- AI làm theo cách hiểu của nó, và khác với suy nghĩ của bạn

**Chiến lược ứng phó**:
- Bổ sung bối cảnh dự án
- Nói rõ stack kỹ thuật và ràng buộc
- Nói rõ định dạng đầu ra bạn mong muốn

**Ví dụ**:
```
Prompt gốc: Viết một xác thực form

Vấn đề: AI dùng thư viện xác thực mà dự án bạn không có

Bổ sung ngữ cảnh:
"Dự án của tôi sử dụng React + Zod để xác thực form.
Hãy dùng Zod viết một schema xác thực form đăng ký người dùng, bao gồm:
- Xác thực định dạng email
- Mật khẩu ít nhất 8 ký tự
- Xác nhận mật khẩu phải khớp"
```

### Góc phần tư 3: Nhiệm vụ phức tạp + Tôi nói rõ ràng → Tách nhỏ nhiệm vụ

**Đặc điểm**:
- Nhiệm vụ liên quan đến nhiều bước hoặc module
- Bạn mô tả rất rõ ràng
- Nhưng chất lượng output của AI không ổn định, cái đúng cái sai

**Chiến lược ứng phó**:
- Tách nhiệm vụ lớn thành nhiệm vụ nhỏ
- Mỗi lần chỉ để AI làm một việc
- Hoàn thành từng bước rồi tích hợp lại

**Ví dụ**:
```
Prompt gốc (quá lớn):
"Thực hiện một hệ thống xác thực người dùng hoàn chỉnh, bao gồm đăng ký, đăng nhập, tìm lại mật khẩu, quản lý JWT token"

Sau khi tách nhỏ:
Vòng 1: "Trước tiên thực hiện chức năng đăng ký người dùng, chỉ cần email và mật khẩu"
Vòng 2: "Bây giờ thêm chức năng đăng nhập, trả về JWT token"
Vòng 3: "Thêm middleware xác thực token"
Vòng 4: "Cuối cùng thêm chức năng tìm lại mật khẩu"
```

### Góc phần tư 4: Nhiệm vụ phức tạp + Tôi nói không rõ → Mô tả lại + Tách nhỏ

**Đặc điểm**:
- Nhiệm vụ phức tạp
- Bản thân bạn có thể cũng chưa nghĩ thông suốt hoàn toàn
- Output của AI khác xa với suy nghĩ của bạn

**Chiến lược ứng phó**:
- Lùi lại một bước, làm rõ nhu cầu của mình
- Dùng phương pháp PRD học ở phần 3.4 để sắp xếp suy nghĩ
- Sau đó tách thành nhiệm vụ nhỏ và hoàn thành từng cái một

**Ví dụ**:
```
Prompt gốc (mơ hồ và phức tạp):
"Giúp tôi làm một ứng dụng ghi chú giống Notion"

Sau khi làm rõ nhu cầu:
"Tôi muốn làm một ứng dụng ghi chú cá nhân, phiên bản MVP chỉ cần:
1. Tạo/Sửa/Xóa ghi chú
2. Trang danh sách ghi chú
3. Lưu trữ cục bộ (Local Storage)

Trước tiên giúp tôi thực hiện chức năng đầu tiên: Tạo và hiển thị danh sách ghi chú.
Stack kỹ thuật: React + localStorage"
```

## Prompt chẩn đoán: Để AI thuật lại sự hiểu biết

Trước khi bắt đầu nhiệm vụ, hoặc sau khi phát hiện vấn đề, có thể dùng Prompt này để AI thuật lại sự hiểu biết của nó:

```markdown
Trước khi tiếp tục, hãy trả lời các câu hỏi sau:

1. **Mục tiêu nhiệm vụ bạn hiểu là gì?**
   (Mô tả bằng một câu)

2. **Bạn định sử dụng giải pháp kỹ thuật nào?**
   (Liệt kê các điểm kỹ thuật then chốt)

3. **Có chỗ nào bạn không chắc chắn, cần tôi làm rõ không?**
   (Nếu không có thì nói "Không")

Hãy trả lời các câu hỏi này trước, xác nhận hiểu thống nhất rồi mới bắt đầu viết code.
```

**Tại sao chiêu này hiệu quả**:
- Bộc lộ sớm sự hiểu lầm của AI
- Giúp bạn phát hiện vấn đề trước khi viết code
- Chi phí thấp hơn nhiều so với việc sửa đổi sau khi đã làm xong

## Định vị nhanh các vấn đề thường gặp

| Triệu chứng | Nguyên nhân khả năng cao nhất | Bước tiếp theo |
|-----|-------------|-------|
| Code không chạy được, báo lỗi cú pháp | AI tạo ra code không hoàn chỉnh | Bảo AI đưa code hoàn chỉnh |
| Chạy báo lỗi "undefined" | Thiếu định nghĩa biến hoặc vấn đề bất đồng bộ | Kiểm tra luồng dữ liệu, bổ sung khởi tạo |
| Chức năng không khớp mô tả | AI hiểu sai nhu cầu | Dùng ngôn ngữ cụ thể hơn để mô tả lại |
| Dùng thư viện lạ | AI phát huy quá đà | Xác định ràng buộc, chỉ định chỉ dùng một số thư viện |
| Code chạy được nhưng kết quả sai | Ảo giác logic | Dùng kiểm thử biên để xác minh, để AI tự kiểm tra |
| Biên dịch báo lỗi kiểu (type error) | Ảo giác API hoặc vấn đề phiên bản | Tra cứu tài liệu chính thức xác nhận API |
| Sửa chỗ này hỏng chỗ kia | Nhiệm vụ quá lớn, ngữ cảnh bị mất | Tách nhỏ nhiệm vụ, tiến hành từng bước |

## Điểm cốt yếu phần này

✓ **Vấn đề cốt lõi**: Trước tiên phán đoán là "tôi nói không rõ" hay "AI làm không đúng"

✓ **Chẩn đoán 3 phút**: Chạy kiểm tra → Xác minh dependency → Chạy test, bắt được 60% vấn đề

✓ **Phân tích bốn góc phần tư**: Dựa trên độ phức tạp nhiệm vụ × độ rõ ràng mô tả, chọn chiến lược khác nhau

✓ **Kỹ thuật thuật lại**: Để AI nói rõ sự hiểu biết trước khi bắt tay làm, phát hiện sớm sai lệch

Sau khi định vị được vấn đề, phần tiếp theo chúng ta sẽ học chiến lược sửa chữa cụ thể — làm thế nào để AI sửa code cho đúng.
