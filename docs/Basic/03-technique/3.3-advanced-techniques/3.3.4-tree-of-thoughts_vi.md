---
title: "3.3.4 Tree of Thoughts: Khám phá nhiều con đường suy luận"
---

![03-technique_3.3-advanced-techniques_3.3.4-tree-of-thoughts.png](../../../public/images/Basic/03-technique_3.3-advanced-techniques_3.3.4-tree-of-thoughts.png)

# 3.3.4 Tree of Thoughts: Khám phá nhiều con đường suy luận

> **Định vị**: Đây là một kỹ thuật nâng cao tùy chọn. Trong Vibe Coding hàng ngày, đa số các bối cảnh dùng Zero-shot, Few-shot, CoT là đã đủ. Tree of Thoughts chủ yếu dùng cho **lựa chọn kỹ thuật, quyết định kiến trúc**... những bối cảnh cần so sánh nhiều phương án, chiếm khoảng 5% công việc hàng ngày. Nếu bạn mới nhập môn, có thể tạm thời bỏ qua bài này, khi nào cần thì quay lại tra cứu.

## Sau bài học này, bạn sẽ nắm được

- Định nghĩa và bối cảnh áp dụng của Tree of Thoughts (ToT)
- Sự khác biệt giữa ToT và Chain of Thought
- Cách sử dụng ToT bản đầy đủ và bản đơn giản hóa
- Khi nào cần ToT, khi nào không cần

## Tree of Thoughts là gì

Tư tưởng cốt lõi của Tree of Thoughts (Cây suy nghĩ, gọi tắt là ToT) là: **Để AI khám phá nhiều con đường khả thi, so sánh rồi mới chọn phương án tối ưu**.

Nếu ví Chain of Thought như "đi một đường đến cùng", thì Tree of Thoughts là "xem thử có mấy con đường, so sánh một chút rồi mới quyết định đi đường nào".

```
Chain of Thought (Tuyến tính):
Vấn đề → Bước 1 → Bước 2 → Bước 3 → Đáp án

Tree of Thoughts (Dạng cây):
Vấn đề → Phương án A → Đánh giá A
     → Phương án B → Đánh giá B  → So sánh → Đề xuất tối ưu
     → Phương án C → Đánh giá C
```

## Sự khác biệt giữa ToT và CoT

| Chiều            | Chain of Thought               | Tree of Thoughts                    |
| :--------------- | :----------------------------- | :---------------------------------- |
| Đường suy luận   | Một đường duy nhất             | Nhiều đường song song               |
| Bối cảnh áp dụng | Vấn đề có đáp án tiêu chuẩn    | Quyết định cần cân nhắc so sánh     |
| Hình thức đầu ra | Suy luận từng bước ra kết luận | So sánh nhiều phương án rồi đề xuất |
| Tiêu tốn Token   | Trung bình                     | Khá cao                             |
| Tần suất sử dụng | Cao (khoảng 30%)               | Thấp (khoảng 5%)                    |

**Đề xuất lựa chọn**:

- Nếu vấn đề có "đáp án đúng" → Dùng CoT
- Nếu cần "chọn phương án tối ưu" → Dùng ToT

## Bối cảnh cốt lõi

ToT thích hợp nhất cho các bối cảnh sau:

### 1. Lựa chọn kỹ thuật

Chọn cơ sở dữ liệu, framework, dịch vụ bên thứ ba v.v.

### 2. Quyết định kiến trúc

Thiết kế kiến trúc hệ thống, phong cách API, mô hình dữ liệu v.v.

### 3. So sánh phương án

Phân tích ưu nhược điểm của nhiều cách thực hiện.

### 4. Phân giải vấn đề phức tạp

Vấn đề cần tiếp cận từ nhiều góc độ.

## Prompt dở vs Prompt tốt

### Bối cảnh: Chọn phương án lưu trữ dữ liệu cho danh sách việc cần làm

### ❌ Prompt dở

```
Ứng dụng danh sách việc cần làm của tôi nên dùng cách nào để lưu trữ dữ liệu?
```

**Vấn đề**: AI có thể chỉ đề xuất một phương án, không có phân tích so sánh.

### ✅ Prompt tốt (Sử dụng ToT)

```
Tôi đang làm một ứng dụng danh sách việc cần làm cá nhân, cần chọn phương án lưu trữ dữ liệu.

Bối cảnh dự án:
- Lượng người dùng: Chỉ mình tôi dùng
- Lượng dữ liệu: Dự kiến vài trăm nhiệm vụ
- Cách triển khai: Static web hosting (như Vercel)
- Tech stack: React + TypeScript

Vui lòng đưa ra 3 phương án lưu trữ khác nhau, đối với mỗi phương án hãy phân tích:
1. Độ phức tạp khi thực hiện (1-5 điểm, 5 điểm phức tạp nhất)
2. Tính bền vững của dữ liệu
3. Có cần backend không
4. Bối cảnh phù hợp

Cuối cùng, dựa trên tình hình dự án của tôi, đề xuất phương án phù hợp nhất và giải thích lý do.
```

### Đầu ra của AI cho Prompt tốt

```
## Phân tích phương án

### Phương án 1: localStorage
- Độ phức tạp: 1 điểm
- Tính bền vững: Chỉ lưu trên trình duyệt máy hiện tại, đổi thiết bị là mất
- Có cần backend: Không
- Bối cảnh phù hợp: Công cụ cá nhân, kiểm chứng prototype

### Phương án 2: IndexedDB
- Độ phức tạp: 3 điểm
- Tính bền vững: Lưu trên trình duyệt, hỗ trợ lượng dữ liệu lớn hơn
- Có cần backend: Không
- Bối cảnh phù hợp: Ứng dụng local cần lưu lượng dữ liệu có cấu trúc lớn

### Phương án 3: Supabase (Cơ sở dữ liệu đám mây)
- Độ phức tạp: 3 điểm
- Tính bền vững: Lưu trên mây, đồng bộ đa thiết bị
- Có cần backend: Không (Dịch vụ BaaS)
- Bối cảnh phù hợp: Cần đồng bộ đa thiết bị, có kế hoạch mở rộng

## Phương án đề xuất

Dựa trên tình hình của bạn (chỉ mình dùng, vài trăm dữ liệu, hosting tĩnh), đề xuất **Phương án 1: localStorage**.

Lý do:
1. Thực hiện đơn giản nhất, vài dòng code là xong
2. Lượng dữ liệu nhỏ, localStorage dư sức chứa
3. Không cần dịch vụ phụ trợ, phù hợp yêu cầu hosting tĩnh
4. Dùng làm MVP để kiểm chứng nhanh, sau này cần thì nâng cấp

Nếu sau này cần đồng bộ đa thiết bị, có thể di chuyển sang Supabase sau.
```

## Ví dụ thực chiến: Chọn phương án đăng nhập

Danh sách việc cần làm của Tiểu Lý cần thêm chức năng đăng nhập, cậu ấy muốn so sánh vài cách thực hiện.

### Prompt ToT

```
Ứng dụng danh sách việc cần làm của tôi cần thêm chức năng đăng nhập người dùng.

Bối cảnh dự án:
- Dự án cá nhân, lượng người dùng dự kiến < 100
- Tech stack: Next.js + TypeScript
- Triển khai trên Vercel
- Mong muốn thực hiện càng đơn giản càng tốt

Vui lòng phân tích 3 phương án đăng nhập sau:
1. Đăng nhập truyền thống bằng tên người dùng + mật khẩu
2. Đăng nhập bằng mã xác thực qua điện thoại
3. Đăng nhập qua bên thứ ba OAuth (như GitHub, Google)

Đối với mỗi phương án hãy phân tích:
- Độ phức tạp thực hiện
- Trải nghiệm người dùng
- Tính bảo mật
- Chi phí bảo trì

Cuối cùng đề xuất một phương án và giải thích lý do.
```

### Trọng điểm đầu ra của AI

AI sẽ phân tích ưu nhược điểm của 3 phương án, và dựa trên bối cảnh "dự án cá nhân, người dùng ít, muốn đơn giản", đề xuất phương án phù hợp nhất (có thể là OAuth bên thứ ba, vì không cần tự quản lý mật khẩu).

## ToT bản đơn giản hóa: Dùng nhanh hàng ngày

Nếu không cần so sánh đa phương án đầy đủ, có thể dùng bản đơn giản hóa:

```
Vui lòng đưa ra 2-3 hướng thực hiện khác nhau, so sánh tóm tắt ưu nhược điểm rồi đề xuất một hướng.
```

Cách này đầu ra gọn gàng hơn, thích hợp cho việc ra quyết định nhanh hàng ngày.

### Ví dụ bản đơn giản hóa

```
Tôi muốn thực hiện chức năng kéo thả sắp xếp nhiệm vụ, vui lòng đưa ra 2-3 hướng thực hiện, so sánh tóm tắt rồi đề xuất một hướng.
Tech stack: React + TypeScript
```

### Đầu ra bản đơn giản hóa

```
Ba hướng thực hiện:

1. react-beautiful-dnd
   Ưu điểm: Chức năng hoàn thiện, animation mượt mà
   Nhược điểm: Dung lượng gói lớn, đã ngừng bảo trì

2. @dnd-kit
   Ưu điểm: Thiết kế hiện đại, dung lượng nhỏ, bảo trì tích cực
   Nhược điểm: Đường cong học tập hơi dốc

3. HTML5 Drag API nguyên bản
   Ưu điểm: Không phụ thuộc
   Nhược điểm: Cần viết nhiều code, hiệu ứng animation phải tự làm

Đề xuất: @dnd-kit
Lý do: Hiện đại, nhẹ, cộng đồng sôi nổi, thích hợp cho dự án bảo trì lâu dài.
```

## Khi nào không cần ToT

| Bối cảnh                       | Dùng ToT? | Lý do                        |
| :----------------------------- | :-------- | :--------------------------- |
| Thực hiện một tính năng cụ thể | ❌        | Viết code trực tiếp là được  |
| Sửa một Bug                    | ❌        | Dùng CoT rà soát từng bước   |
| Đầu ra định dạng hóa           | ❌        | Dùng Few-shot                |
| Lựa chọn kỹ thuật              | ✅        | Cần so sánh nhiều lựa chọn   |
| Thiết kế kiến trúc             | ✅        | Cần cân nhắc nhiều phương án |

**Tiêu chuẩn phán đoán**: Nếu trong lòng bạn đã có hướng đi đại khái, chỉ muốn xác nhận lại, không cần ToT. Nếu bạn cần AI giúp bạn "lựa chọn", hãy dùng ToT.

## Mẫu có thể sao chép

### Mẫu ToT đầy đủ

```markdown
Tôi cần [Nội dung quyết định].

Bối cảnh dự án:

- [Thông tin bối cảnh 1]
- [Thông tin bối cảnh 2]
- [Ràng buộc then chốt]

Vui lòng đưa ra [Số lượng] phương án khác nhau, đối với mỗi phương án hãy phân tích:

1. [Chiều đánh giá 1]
2. [Chiều đánh giá 2]
3. [Chiều đánh giá 3]
4. [Chiều đánh giá 4]

Cuối cùng, dựa trên tình hình dự án của tôi, đề xuất phương án phù hợp nhất và giải thích lý do.
```

### Mẫu ToT đơn giản hóa

```markdown
Tôi muốn [Mục tiêu thực hiện].
Bối cảnh: [Bối cảnh tóm tắt]

Vui lòng đưa ra 2-3 hướng đi khác nhau, so sánh tóm tắt ưu nhược điểm rồi đề xuất một hướng.
```

### Mẫu chuyên dụng cho lựa chọn kỹ thuật

```markdown
Tôi cần lựa chọn [Loại lựa chọn: Cơ sở dữ liệu/Framework/Dịch vụ bên thứ ba].

Tình hình dự án:

- Quy mô: [Lượng người dùng/Lượng dữ liệu]
- Tech stack: [Công nghệ hiện có]
- Cách triển khai: [Môi trường triển khai]
- Tình hình team: [Trình độ kỹ thuật/Số người]

Chiều đánh giá:

- Độ phức tạp thực hiện
- Hiệu năng
- Chi phí bảo trì
- Hệ sinh thái cộng đồng

Vui lòng so sánh [Danh sách phương án ứng viên], đề xuất lựa chọn phù hợp nhất.
```

## Trọng điểm bài học

✓ **Bản chất của ToT**: Khám phá nhiều con đường, so sánh rồi chọn phương án tối ưu

✓ **Khác biệt với CoT**: CoT là suy luận đơn tuyến, ToT là so sánh đa phương án

✓ **Bối cảnh áp dụng**: Lựa chọn kỹ thuật, quyết định kiến trúc, so sánh phương án (khoảng 5%)

✓ **Bản đơn giản hóa**: Dùng nhanh hàng ngày "đưa ra 2-3 hướng, so sánh rồi đề xuất"

✓ **Đừng lạm dụng**: Nếu đã có hướng đi, thực thi trực tiếp là được

Bài sau, chúng ta sẽ học cách để AI tự kiểm tra —— Self-Critique.
